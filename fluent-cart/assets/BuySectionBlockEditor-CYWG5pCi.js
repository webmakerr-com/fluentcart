import{j as t,b as a}from"./BlockEditorTranslator-Do4trUgb.js";import{C as k,a as S}from"./index-C7Ob1qfg.js";import{E as B}from"./EditorPanel-CY23VFza.js";import{E as x}from"./EditorPanelRow-4NClJhlp.js";import{S as E}from"./SelectProductModal-dWenDl2b.js";import{u as q}from"./SingleProductContext-BzN8-5Wa.js";import{B as C}from"./Icons-B2jBVdSk.js";import{a as L}from"./add-query-args-COp5A_Oq.js";import"./index-CGoo2crO.js";import"./ProductListItem-ByOwLs0s.js";const{InspectorControls:M}=wp.blockEditor,I=({attributes:i,setAttributes:o,selectedProduct:c,setSelectedProduct:d})=>t.jsx(M,{children:t.jsx("div",{className:"fct-inspector-control-wrap fct-inspector-control-wrap--product-card",children:t.jsx("div",{className:"fct-inspector-control-group",children:t.jsx("div",{className:"fct-inspector-control-body",children:t.jsxs(B,{title:a("Product"),children:[t.jsxs(x,{children:[t.jsx("span",{className:"fct-inspector-control-label",children:a("Query type")}),t.jsx("div",{className:"actions",children:t.jsx(k,{customKeys:{key:"value",label:"label"},defaultValue:i.query_type,options:[{label:a("Default"),value:"default"},{label:a("Custom"),value:"custom"}],onChange:function(e){o({query_type:e})}})})]}),i.query_type==="custom"&&t.jsxs(x,{className:"flex-col",children:[t.jsx(E,{onModalClosed:e=>{o({product_id:e.ID||""}),d(e)}}),c&&t.jsxs("div",{className:"fct-selected-variation-info w-full",children:[t.jsx("strong",{children:a("Selected product:")}),t.jsx("p",{children:c.post_title})]})]})]})})})})}),$=""+new URL("assets/BuySection-B6Mj6O-Z.png",import.meta.url).href,{useBlockProps:R}=wp.blockEditor,{registerBlockType:Q}=wp.blocks,{useEffect:j,useState:W}=wp.element,{useSelect:F}=wp.data,{store:U}=wp.blockEditor,l=window.fluent_cart_buy_section_data,y=l.placeholder_image,w=window.fluentCartRestVars.rest;Q(l.slug+"/"+l.name,{title:l.title,description:l.description,icon:{src:C},example:{attributes:{},innerBlocks:[{name:"core/image",attributes:{url:$,alt:"Buy Section Preview",style:{width:"100%",height:"auto"}}}]},category:"fluent-cart",attributes:{product_id:{type:["string","number"],default:""},query_type:{type:"string",default:"default"},inside_product_info:{type:"string",default:"-"}},edit:({attributes:i,setAttributes:o,clientId:c})=>{var m,h,f,v;const d=R(),[e,p]=W({}),N=w.url+"/products/"+i.product_id,n=q(),u=F(s=>{const{getBlockParents:r,getBlockName:g}=s(U);return r(c).some(b=>g(b)==="fluent-cart/product-info")},[c]);o({inside_product_info:u?"yes":"no"});const _=()=>{S({path:L(N,{with:["variants"]}),headers:{"X-WP-Nonce":w.nonce}}).then(s=>{p(s.product||{})}).finally(()=>{})};return j(()=>{n!=null&&n.product&&p(n.product)},[n==null?void 0:n.product]),j(()=>{u||_()},[i.product_id]),t.jsxs("div",{...d,children:[u?"":t.jsx(I,{attributes:i,setAttributes:o,selectedProduct:e,setSelectedProduct:p}),t.jsxs("div",{className:"fct_buy_section",children:[(e==null?void 0:e.variants)&&new Set(e.variants.map(s=>{var r;return(r=s.other_info)==null?void 0:r.payment_type})).size>1&&t.jsx("div",{className:"fct-product-tab-nav",children:[...new Set(e.variants.map(s=>{var r;return(r=s.other_info)==null?void 0:r.payment_type}))].filter(Boolean).map((s,r)=>t.jsx("div",{className:`fct-product-tab-nav-item ${r===0?"active":""}`,children:s},s))}),t.jsx("div",{className:"fct-product-variants",children:(m=e==null?void 0:e.variants)!=null&&m.length?e.variants.map((s,r)=>t.jsx("div",{className:`fct-product-variant-item ${r===0?"selected":""}`,children:t.jsxs("div",{className:"variant-content",children:[t.jsx("div",{className:"fct-product-variant-image",children:t.jsx("img",{src:s.thumbnail??y,alt:s.variation_title??""})}),t.jsx("div",{className:"fct-product-variant-title",children:s.variation_title??a("Select a product")})]})},s.id??r)):t.jsx("div",{className:"fct-product-variant-item",children:t.jsxs("div",{className:"variant-content",children:[t.jsx("div",{className:"fct-product-variant-image",children:t.jsx("img",{src:((f=(h=e==null?void 0:e.detail)==null?void 0:h.featured_media)==null?void 0:f.url)??y,alt:(e==null?void 0:e.post_title)??""})}),t.jsx("div",{className:"fct-product-variant-title",children:(e==null?void 0:e.post_title)??a("Select a product")})]})})}),t.jsx("div",{className:"fct-product-item-price",children:(v=e==null?void 0:e.variants)!=null&&v[0]?`$${(e.variants[0].item_price/100).toFixed(2)}`:"$0.00"}),t.jsxs("div",{className:"fct-product-quantity-container",children:[t.jsx("h5",{className:"quantity-title",children:a("Quantity")}),t.jsxs("div",{className:"fct-product-quantity",children:[t.jsx("button",{className:"fct-quantity-decrease-button",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"2",viewBox:"0 0 14 2",fill:"none",children:t.jsx("path",{d:"M12.3333 1L1.66659 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),t.jsx("input",{type:"text",className:"fct-quantity-input",value:"1",min:"1",max:"10000"}),t.jsx("button",{className:"fct-quantity-increase-button",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:t.jsx("path",{d:"M6.99996 1.66666L6.99996 12.3333M12.3333 6.99999L1.66663 6.99999",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),t.jsxs("div",{className:"fct-product-buttons-wrap",children:[t.jsx("button",{className:"fluent-cart-direct-checkout-button",children:a("Buy Now")}),t.jsx("button",{className:"fluent-cart-add-to-cart-button",children:a("Add to Cart")})]})]})]})},save:function(i){return null}});
