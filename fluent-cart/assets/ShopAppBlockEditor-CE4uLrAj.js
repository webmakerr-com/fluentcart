import{j as e,b as r}from"./BlockEditorTranslator-Do4trUgb.js";import"./ColorPickerField-3ZPZ4ybn.js";import{C as j,a as R}from"./index-C7Ob1qfg.js";import{P as $}from"./Icons-B2jBVdSk.js";import{E as z}from"./ErrorBoundary-BPEJCTSJ.js";import{P as F}from"./ProductContext-ByBXGImP.js";import"./index-CGoo2crO.js";const{Panel:B,PanelBody:D}=wp.components,x=o=>{const{title:t,children:a,initialOpen:n=!1}=o;return e.jsx("div",{className:"fct-block-editor-control",children:e.jsx(B,{children:e.jsx(D,{title:t||null,initialOpen:n,children:e.jsx("div",{className:"fct-block-editor-control-body",children:a})})})})},{useEffect:oe}=wp.element,{ColorPicker:ce,__experimentalRadio:ie,__experimentalRadioGroup:ne,RangeControl:de}=wp.components,{InspectorControls:pe}=wp.blockEditor,{__experimentalRadio:k,__experimentalRadioGroup:O,RangeControl:T}=wp.components,G=o=>{const{attributes:t,setAttributes:a,blockEditorData:n}=o,d=l=>{a({paginator:l})};return e.jsxs(x,{title:r("Paginator"),children:[e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("View")}),e.jsx("div",{className:"actions",children:e.jsxs(O,{className:"fct-block-editor-radio-group",label:r("Pagination Type"),onChange:d,checked:t.paginator,children:[e.jsx(k,{value:"scroll",children:r("Scroll")}),e.jsx(k,{value:"numbers",children:r("Numbers")})]})})]})}),e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Per Page/Scroll")}),e.jsx("div",{className:"actions",children:e.jsx(T,{value:t.per_page,onChange:l=>a({per_page:l}),min:1,max:50})})]})})]})},{TextControl:A,ToggleControl:m}=wp.components,L=o=>{const{attributes:t,setAttributes:a,blockEditorData:n}=o,d=(l,_)=>{let s={...t.filters??{}};s[l]=_,a({filters:{...s}})};return e.jsxs(x,{title:r("Filter Option"),children:[e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Enable Filter")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:t.enable_filter,onChange:l=>{a({enable_filter:l})}})})]})}),t.enable_filter&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Wildcard Filter")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:t.enable_wildcard_filter,onChange:l=>{a({enable_wildcard_filter:l})}})})]})}),t.enable_wildcard_filter&&e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Also search in Content")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:t.enable_wildcard_for_post_content,onChange:l=>{a({enable_wildcard_for_post_content:l})}})})]})}),e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Live Filter")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:t.live_filter,onChange:l=>{a({live_filter:l})}})})]})}),Object.keys(t.default_filter_options).map((l,_)=>{var c,f,h;let s={};return(c=t.filters)!=null&&c.hasOwnProperty(l)?s=t.filters[l]:(f=t.default_filter_options)!=null&&f.hasOwnProperty(l)&&(s=t.default_filter_options[l]),l!=="enabled"?e.jsxs("div",{className:"mt-5",children:[e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label capitalize",children:l.replace(/[-_]/g," ")}),e.jsx("div",{className:"actions",children:e.jsx(m,{checked:typeof t.filters<"u"&&typeof t.filters[l]<"u"&&((h=t.filters[l])==null?void 0:h.enabled),onChange:p=>{var u,N;let i={};(u=t.filters)!=null&&u.hasOwnProperty(l)?i=t.filters[l]:(N=t.default_filter_options)!=null&&N.hasOwnProperty(l)&&(i=t.default_filter_options[l]),i.enabled=p,i.filter_type=t.default_filter_options[l].filter_type,i.is_meta=t.default_filter_options[l].is_meta,i.multiple=t.default_filter_options[l].multiple,d(l,i)}})})]})}),e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Display Name")}),e.jsx("div",{className:"actions",children:e.jsx(A,{value:s.label,onChange:p=>{var u;let i={};(u=t.filters)!=null&&u.hasOwnProperty(l)?i=t.filters[l]:i.enabled=!0,i.label=p,d(l,i)}})})]})})]},l):e.jsx(e.Fragment,{})})]})]})};let S=[],E={};Object.keys(window.fluent_cart_shop_app_block_editor_data.taxonomies).map((o,t)=>{let a=window.fluent_cart_shop_app_block_editor_data.taxonomies[o];S[o]=[],E[o]={filter_type:"options",is_meta:!0,label:a.label,enabled:!1,multiple:!1}});const w={paginator:{type:"string",default:"scroll"},per_page:{type:"number",default:10},view_mode:{type:"string",default:"grid"},price_format:{type:"string",default:"starts_from"},search_grid_size:{type:"number",default:0},product_grid_size:{type:"number",default:0},product_box_grid_size:{type:"number",default:0},use_default_style:{type:"boolean",default:!0},enable_filter:{type:"boolean",default:!1},live_filter:{type:"boolean",default:!0},enable_wildcard_filter:{type:"boolean",default:!1},enable_wildcard_for_post_content:{type:"boolean",default:!1},order_type:{type:"string",default:"DESC"},order_by:{type:"string",default:"ID"},filters:{},default_filter_options:{type:"object",default:{...E,price_range:{filter_type:"range",is_meta:!1,label:"Price",enabled:!1}}},default_filters:{type:"object",default:{enabled:!1,allow_out_of_stock:!1,wildcard:"",...S}},colors:{}},{InspectorControls:V}=wp.blockEditor,{TextControl:M,Card:fe,CardHeader:ue,CardBody:me,ToggleControl:C,Button:_e,Tooltip:he,__experimentalRadio:xe,__experimentalRadioGroup:be,RangeControl:g}=wp.components,I=o=>{const{attributes:t,setAttributes:a,blockEditorData:n}=o,d=s=>{a({search_grid_size:s})},l=s=>{a({product_grid_size:s})},_=s=>{a({product_box_grid_size:s})};return e.jsx(V,{children:e.jsx("div",{id:"gutenpride-controls",className:"fluent-cart-product-block-editor",children:e.jsxs("div",{className:"fluent-cart-product-block-editor-inner",children:[e.jsx(G,{attributes:t,setAttributes:a,blockEditorData:n}),e.jsxs(x,{title:r("Product Grid Option"),children:[e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("View Mode")}),e.jsx("div",{className:"actions",children:e.jsx(j,{customKeys:{key:"value",label:"label"},defaultValue:t.view_mode,options:[{label:r("Grid"),value:"grid"},{label:r("List"),value:"list"}],onChange:function(s){a({view_mode:s})}})})]})}),e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Price Format")}),e.jsx("div",{className:"actions",children:e.jsx(j,{customKeys:{key:"value",label:"label"},defaultValue:t.price_format,options:[{label:r("Starts From"),value:"starts_from"},{label:r("Range"),value:"range"}],onChange:function(s){a({price_format:s})}})})]})}),e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Product Per Row")}),e.jsx("div",{className:"actions",children:e.jsx(g,{value:t.product_box_grid_size,onChange:_,min:0,max:5})})]})}),t.enable_filter&&e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Search Grid Size")}),e.jsx("div",{className:"actions",children:e.jsx(g,{value:t.search_grid_size,onChange:d,min:0,max:5})})]})}),t.enable_filter&&e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Product Grid Size")}),e.jsx("div",{className:"actions",children:e.jsx(g,{value:t.product_grid_size,onChange:l,min:0,max:5})})]})})]}),e.jsx(L,{attributes:t,setAttributes:a,blockEditorData:n}),e.jsx(x,{title:r("Default Filter"),children:e.jsxs("div",{children:[e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Enable Filtering")}),e.jsx("div",{className:"actions",children:e.jsx(C,{checked:t.default_filters.enabled,onChange:s=>{let c=t.default_filters;c.enabled=s,a({default_filters:{...c}})}})})]})}),t.default_filters.enabled&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Allow Out Of Stock")}),e.jsx("div",{className:"actions",children:e.jsx(C,{checked:t.default_filters.allow_out_of_stock,onChange:s=>{let c=t.default_filters;c.allow_out_of_stock=s,a({default_filters:{...c}})}})})]})}),e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:r("Search")}),e.jsx("div",{className:"actions",children:e.jsx(M,{value:t.default_filters.wildcard,onChange:s=>{let c=t.default_filters;c.wildcard=s,a({default_filters:{...c}})}})})]})}),Object.keys(window.fluent_cart_shop_app_block_editor_data.taxonomies).map((s,c)=>{let f=window.fluent_cart_shop_app_block_editor_data.taxonomies[s];return e.jsx("div",{className:"fct-block-editor-control-item",children:e.jsxs("div",{className:"fct-inspector-control-row",children:[e.jsx("span",{className:"label",children:f.label}),e.jsx("div",{className:"actions",children:e.jsx(j,{placeholder:r("Select"),isMulti:!0,customKeys:{key:"value",label:"label"},defaultValue:t.default_filters[s],options:f.terms,onChange:function(h){let p={...t.default_filters};p[s]=h,a({default_filters:p})}})})]})},c)})]})]})})]})})},"setting")},{useState:je}=wp.element;window.fluentCartRestVars.rest.url;window.fluent_cart_block_editor_asset.placeholder_image;const{useEffect:ge,useState:ve}=wp.element,U=""+new URL("assets/Products-D4mdThAM.png",import.meta.url).href,{useEffect:we,useRef:Ne,useMemo:ke,useState:Ce,useCallback:ye}=wp.element,{select:Pe,dispatch:Se,useSelect:Ee}=wp.data,{registerBlockType:K}=wp.blocks,{useEffect:y,useState:H,Component:Re,useMemo:$e,createContext:W}=wp.element;wp.serverSideRender;W();const{useBlockProps:P,InnerBlocks:v,BlockContextProvider:ze}=wp.blockEditor,b=window.fluent_cart_shop_app_block_editor_data;window.fluentCartShopAppTranslator=o=>{var t;return((t=window.fluent_cart_shop_app_block_editor_data)==null?void 0:t.trans[o])||o};const Y=o=>({...w.colors,...o.colors||{}}),q=window.fluentCartRestVars.rest.url,J=q+"/public/products",Q=[["fluent-cart/shopapp-product-action-container",{},[["fluent-cart/shopapp-product-view-switcher"],["fluent-cart/shopapp-product-filter-sort-by"]]],["fluent-cart/shopapp-product-container",{className:"fluent-product-container"},[["fluent-cart/shopapp-product-loader",{layout:{type:"constrained"},metadata:{name:"Product Loader"}},[["fluent-cart/shopapp-product-spinner"]]],["fluent-cart/shopapp-product-filter",{},[["fluent-cart/shopapp-product-filter-search-box"],["fluent-cart/shopapp-product-filter-filters"],["fluent-cart/shopapp-product-filter-button",{},[["fluent-cart/shopapp-product-filter-apply-button"],["fluent-cart/shopapp-product-filter-reset-button"]]]]],["fluent-cart/shopapp-product-no-result",{className:"fluent-product-no-result",layout:{type:"constrained"},metadata:{name:"No Result"}},[["core/paragraph",{content:"No results found",align:"center",fontSize:"large"}],["core/paragraph",{content:r("You can try %1$s clearing any filters %2$s or head to our %3$s store's home %4$s",'<a href="#">',"</a>",'<a href="#">',"</a>"),align:"center"}]]],["fluent-cart/shopapp-product-loop",{className:"fluent-product-loop",layout:{type:"constrained"},metadata:{name:"Product Loop"}},[["fluent-cart/shopapp-product-image"],["fluent-cart/shopapp-product-title"],["fluent-cart/shopapp-product-price"],["fluent-cart/shopapp-product-buttons"]]]]],["fluent-cart/product-paginator",{className:"fluent-product-paginator",layout:{type:"constrained"},metadata:{name:"Paginator"}},[["fluent-cart/product-paginator-info"],["fluent-cart/product-paginator-number"]]]],X=`${b.slug}/${b.name}`;K(X,{apiVersion:2,providesContext:{"fluent-cart/paginator":"paginator","fluent-cart/per_page":"per_page","fluent-cart/enable_filter":"enable_filter","fluent-cart/product_box_grid_size":"product_box_grid_size","fluent-cart/view_mode":"view_mode","fluent-cart/filters":"filters","fluent-cart/default_filters":"default_filters","fluent-cart/order_type":"order_type","fluent-cart/order_by":"order_by","fluent-cart/live_filter":"live_filter","fluent-cart/price_format":"price_format","fluent-cart/enable_wildcard_filter":"enable_wildcard_filter"},title:b.title,icon:{src:$},example:{attributes:{},innerBlocks:[{name:"core/image",attributes:{url:U,alt:"Shop App Preview",style:{width:"100%",height:"auto"}}}]},supports:{html:!1,reusable:!1,innerBlocks:!0},category:"fluent-cart",attributes:{colors:{type:"object",default:w.colors||{}},message:{type:"string",default:""},variations:{type:"object",default:{}},...w},edit:({attributes:o,setAttributes:t})=>{const a=P({className:"fluent-cart-product-block-editor"}),[n,d]=H([]);return y(()=>{try{(!o.colors||Object.keys(o.colors).length===0)&&t({colors:Y(o)}),o.variations||t({variations:{}})}catch(l){console.error("Error in useEffect:",l)}},[]),y(()=>{R({path:J}).then(l=>{d(l.products.products.data)})},[]),e.jsx("div",{...a,children:e.jsx(z,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(I,{attributes:o,setAttributes:t,blockEditorData:b}),e.jsx("div",{className:"fluent-cart-inner-blocks",children:e.jsx(F,{value:{products:n},children:e.jsx(v,{template:Q,allowedBlocks:["core/group","core/columns","core/paragraph","core/image","core/heading"],templateLock:!1,renderAppender:v.ButtonBlockAppender})})})]})})})},save({attributes:o}){const t=P.save();return e.jsx("div",{...t,children:e.jsx("div",{className:"fct-products-wrapper","data-fluent-cart-shop-app":!0,"data-fluent-cart-product-wrapper":"",children:e.jsx(v.Content,{})})})}});
