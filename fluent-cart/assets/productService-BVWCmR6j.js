var A=a=>{throw TypeError(a)};var Y=(a,t,i)=>t.has(a)||A("Cannot "+i);var f=(a,t,i)=>(Y(a,t,"read from private field"),i?i.call(a):t.get(a)),h=(a,t,i)=>t.has(a)?A("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,i),b=(a,t,i,e)=>(Y(a,t,"write to private field"),e?e.call(a,i):t.set(a,i),i);import{A as $,t as y}from"./Translator-Bios5QX5.js";import{A as D}from"./Arr-MwYQQ3qa.js";import{d as I}from"./dayjs.min-2rai63wT.js";var g,x,v,M,_,S,j,U;const o=class o{static setLocale(){var i;b(o,M,f(o,M).replace("_","-"));const t=$.get("shop",{});b(o,S,t.decimal_separator||null),b(o,_,f(this,M)),t.decimal_separator?b(o,_,t.decimal_separator==="comma"?"de-DE":"en-US"):b(o,_,navigator.language||((i=navigator.languages)==null?void 0:i[0])||"en-US")}static formatNumber(t,i=!0,e=!1,r=null){if(!t&&e)return"";const c=D.get(f(o,x),r||"",f(o,g));if(t?t=(t/100).toFixed(2):t="0.00",!i)return t;let s=new Intl.NumberFormat(f(o,_),{minimumFractionDigits:2,maximumFractionDigits:2}).format(t);return s=y(s),i?f(o,v)==="before"?`${c}${s}`:`${s}${c}`:s}static formatScaled(t,i=!0,e=!1,r=""){if(!t&&e)return"";const c=D.get(f(o,x),r||"",f(o,g));let s,l="";if(Math.abs(t)>=1e11)t=t/1e9,l="B";else if(Math.abs(t)>=1e8)t=t/1e6,l="M";else if(Math.abs(t)>=1e5)t=t/1e3,l="K";else return o.formatNumber(t,i,e,c);if(s=o.formatNumber(t,!1,e,c),!i)return s;const d=`${s}${l}`;return f(o,v)==="before"?`${c}${d}`:`${d}${c}`}static scaled(t,i=!0,e=!1,r=""){return o.formatScaled(t*100,i,e,r)}static formatBulk(t,i=!1,e=f(o,g),r=!1){return t.map(c=>i?o.formatScaled(c,e,r):o.formatNumber(c,e,r))}static get currencySign(){return f(o,g)}static get currencyPosition(){return f(o,v)}static get locale(){return f(o,_)}static generateVolumeSummary(t,i=!1){if(i){const e=I(),r=e.format("YYYY-MM"),c=e.subtract(1,"month").format("YYYY-MM"),s=e.format("MMMM"),l=e.subtract(1,"month").format("MMMM"),d=t[r]||{current:0,yoy_growth:0},n=t[c]||{current:0,yoy_growth:0};n.yoy_growth=Number(n.yoy_growth||0),d.yoy_growth=Number(d.yoy_growth||0);const u=o.formatScaled(n.current),k=o.formatScaled(d.current),N=n.yoy_growth>=0?y("Increase of %s year-over-year",n.yoy_growth.toFixed(1)+"%"):y("Decrease of %s year-over-year",Math.abs(n.yoy_growth).toFixed(1)+"%");return y("%1$s gross volume was %2$s, a %3$s. Gross volume for the month of %4$s so far is %5$s. Here's the trend over the previous 12 months.",`<span class="font-bold">${l}</span>`,`<span class="font-bold fct-custom-tooltip">${u}<span class="fct-custom-tooltip-content">${o.formatNumber(n.current)}</span></span>`,`<span class="font-bold ${n.yoy_growth>=0?"text-green-500":"text-red-500"}">${N} </span>`,s,`<span class="font-bold fct-custom-tooltip">${k}<span class="fct-custom-tooltip-content">${o.formatNumber(d.current)}</span></span>`)}else{const e=I(),r=e.year(),c=Math.floor((e.month()+3)/3);e.format("MMMM");const s=c*3-1;let l=I().year(r).month(s).endOf("month");c===1&&(l=l.month(2).endOf("month")),c===2&&(l=l.month(5).endOf("month")),c===3&&(l=l.month(8).endOf("month")),c===4&&(l=l.month(11).endOf("month"));const d=l.diff(e,"day"),n=Object.keys(t)[0],u=Object.values(t)[0],k=o.formatScaled(u.current);u.yy_growth=Number(u.yy_growth||0);const N=u.yy_growth>=0?y("Increase of %s year-over-year",u.yy_growth.toFixed(1)+"%"):y("Decrease of %s year-over-year",Math.abs(u.yy_growth).toFixed(1)+"%");let O=`Q${c}-${r}`;const m=D.get(t,O,{current:0,prev_year:0,yy_growth:0});m.yy_growth=Number(m.yy_growth||0);const P=o.formatScaled(m.current);let p=0;m.current===0&&u.current===0?p=0:m.current===0?p=-100:(p=(m.current-u.current)/m.current*100,isNaN(p)&&(p=0));const V=p>=0?y("a increase of %1$s compared to %2$s",p.toFixed(1)+"%",n):y("a decrease of %1$s compared to %2$s",Math.abs(p).toFixed(1)+"%",n);return y("%1$s gross volume was %2$s, a %3$s. With %4$s days left in %5$s, Gross volume is %6$s for the quarter, %7$s and %8$s year-over-year",`<span class="font-bold">${n}</span>`,`<span class="font-bold fct-custom-tooltip">${k}<span class="fct-custom-tooltip-content">${o.formatNumber(u.current)}</span></span>`,`<span class="font-bold ${u.yy_growth>=0?"text-green-500":"text-red-500"}">${N} </span>`,d,`Q${c}`,`<span class="font-bold fct-custom-tooltip">${P}<span class="fct-custom-tooltip-content">${o.formatNumber(m.current)}</span></span>`,`<span class="font-bold ${p>=0?"text-green-500":"text-red-500"}">${V} </span>`,`<span class="font-bold ${m.yy_growth>=0?"text-green-500":"text-red-500"}">${m.yy_growth}% </span>`)}}};g=new WeakMap,x=new WeakMap,v=new WeakMap,M=new WeakMap,_=new WeakMap,S=new WeakMap,j=new WeakSet,U=function(t){return t},h(o,j),h(o,g,$.get("shop.currency_sign","$")),h(o,x,$.get("currency_signs",{})),h(o,v,$.get("shop.currency_position","before")),h(o,M,$.get("wp_locale","en-US")),h(o,_,null),h(o,S);let w=o;w.setLocale();function Q(a,t){var c;let i=[],e,r;if(a)for(const s of a){if(e={},e.id=s.detail.id,e.order_id=t,e.post_id=s.ID,e.object_id=s.detail.default_variation_id,e.featured_media=(c=s.detail.featured_media)==null?void 0:c.url,e.price=s.detail.item_price,e.unit_price=s.detail.item_price,e.title=s.post_title,e.post_title=s.post_title,e.quantity=1,e.fulfillment_type=s.detail.fulfillment_type,e.manage_stock=s.detail.manage_stock,e.stockStatus=s.detail.manage_stock==1?s.detail.stock_availability:"in-stock",e.soldIndividually=s.detail.sold_individually,e.settings=s.detail.settings,e.checked=!1,e.min_price=s.detail.min_price,e.max_price=s.detail.max_price,s.detail.variants&&s.detail.variants.length){e.children=[];for(const l in s.detail.variants){r=s.detail.variants[l],e.title=r.variation_title;let d=s.detail.default_variation_id==r.id;if(!d&&s.detail.variation_type==="simple"&&(d=!0),d&&(e.available=r.manage_stock.toString()==="1"?r.available:1/0,e.price=r.item_price,e.unit_price=r.item_price,e.object_id=r.id,e.cost=r.item_cost,e.other_info=r.other_info,e.payment_type=r.other_info.payment_type),s.detail.variants&&s.detail.variation_type==="simple_variations"){let n={};r=s.detail.variants[l],n.id=r.id,n.order_id=t,n.post_id=r.post_id,n.object_id=r.id,n.price=r.item_price,n.unit_price=r.item_price,n.item_cost=r.item_cost,n.featured_media=r.media&&r.media.meta_value&&r.media.meta_value[0]?r.media.meta_value[0].url:e.featured_media,n.quantity=1,n.post_title=s.post_title,n.title=r.variation_title,n.fulfillment_type=s.detail.fulfillment_type,n.manage_stock=r.manage_stock,n.stockStatus=r.manage_stock==1?r.stock_status:"in-stock",n.available=r.manage_stock==1?r.available:1/0,n.soldIndividually=r.sold_individually,n.settings=r.settings,n.checked=!1,n.disable=q(n),n.other_info=r.other_info,n.payment_type=r.other_info.payment_type,e.children.push(n)}}}e.disable=q(e),i.push(e)}return i}const q=a=>!(a.stockStatus==="in-stock"&&(Array.isArray(a.children)&&a.children.length===0||!a.children)),B=(a,t,i=!1)=>!a&&i?"":(a||(a="0.00"),$.get("shop.currency_sign")+" "+a),G=(a,t,i=!1)=>w.formatNumber(a,t,i),K=a=>!a.item_price||!a.item_cost?"--":((a.item_price-a.item_cost)/a.item_price*100).toFixed(2)+"% ",C=a=>{if(!a.item_price||!a.item_cost)return"--";const t=a.item_price-a.item_cost;return w.formatNumber(t*100,!0)},E=a=>a.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),H=a=>{const t=new Set;return a.order_items.forEach(i=>{(Number(i.object_id)!==0||i.object_id===null)&&t.add(i.object_id)}),t.size};export{w as C,E as a,B as b,C as c,K as d,G as f,H as g,Q as p};
