let $=jQuery;const MenuMobile=function(){var e,t=".js-slideout-panel",n=".js-slideout-menu",o=".js-btn-close",a=".js-toggle-menu";function i(){e.disableTouch()}function s(){document.querySelector(o).addEventListener("click",(function(){e.close()})),$(window).resize((function(){i()})),(e=new Slideout({panel:document.querySelector(t),menu:document.querySelector(n),padding:288,tolerance:0})).on("open",(function(){e.enableTouch(),$(t).addClass("openSlider")})),e.on("close",(function(){$(t).removeClass("openSlider"),e.disableTouch()})),$(document).on("click",".openSlider",(function(){return $(t).removeClass("openSlider"),e.close(),!1})),$(a).on("click",(function(){return $(".js-slideout-panel").removeClass("openSlider"),e.toggle(),!1}))}return{init(){if(!$(o).length)return this;s(),i()}}}(),CartHeader=function(){var e,t=$("body");return{$cart_info:"",init:function(){(e=this).$cart_info=$('[data-cart="quantity"]'),e.$pluralize_text=$('[data-cart="pluralize_items"]'),t.on("cart:update cart:change",(function(t){e.render(t.cart)})),t.on("cart:add",(function(t){e.render(t.cart)})),$(document).on("click","header .cart",(function(){$("html").addClass("cart-pull-page")}))},render:function(t){e.updateTotalItems(t)},updateTotalItems:function(t){t.quantity?e.$cart_info.show():e.$cart_info.hide(),e.$cart_info.text(t.quantity),e.$pluralize_text.text(t.pluralize_text)}}}();function renderLevel(){$(".children-name.level-1").is(":visible")?$(".head-menu").addClass("level-1"):$(".head-menu").removeClass("level-1"),$(".children-name.level-0").is(":visible")?$(".head-menu").addClass("level-0"):$(".head-menu").removeClass("level-0")}MenuMobile.init(),CartHeader.init(),$(".category-menu .head").on("click",(function(){$(this).toggleClass("open")})),$(".mobile-menu .menu-list .children, .mobile-menu .menu-list .sub-menu, .mobile-menu .pages-menu .children, .mobile-menu .pages-menu .sub-menu").closest("li").addClass("parent").find("a").on("click",(function(){if($(this).parent(".parent").length)return $(this).parents(".open").addClass("subview").removeClass("open"),$(this).parent(".parent").addClass("open").css({marginLeft:270}).animate({marginLeft:0},{duration:300}),$(".menu-list").addClass("nav-open"),$(".pages-menu ul").addClass("nav-open"),$(".head-menu .link-home").addClass("js-prev"),$(".mobile-menu").addClass("subview-open"),renderLevel(),!1}));var name="",href="";$(".cat-item.parent").each((function(){var e=$(this).parents(".children").length;0==e&&(name=$(this).find(" > a span").text(),href=$(this).find(" > a").attr("href")),$(this).find("> .children").prepend('<li class="cat-item children-name level-'+e+'"><a href="'+href+'"><span>'+name+"</span></a></li>")}));name="",href="";$(".menu-item.parent").each((function(){var e=$(this).parents(".sub-menu").length;0==e&&(name=$(this).find(" > a").text(),href=$(this).find(" > a").attr("href")),$(this).find("> .sub-menu").prepend('<li class="menu-item children-name level-'+e+'"><a href="'+href+'"><span>'+name+"</span></a></li>")})),$(".head-menu").on("click",(function(){if(!$(this).find(".js-prev").length)return!0;$(".js-prev").removeClass("js-prev"),$(".mobile-menu").removeClass("subview-open");var e=$(".mobile-menu .subview"),t=$(".mobile-menu .open");return e.length||(e=t),e.css({marginLeft:0}).animate({marginLeft:270},300,"linear",(function(){e.css({marginLeft:0}),t.removeClass("open"),e.removeClass("subview"),$(".menu-list").removeClass("nav-open"),$(".pages-menu ul").removeClass("nav-open"),renderLevel()})),!1})),$(document).on("click",".children-name.level-1",(function(){var e=$(this).closest(".parent");return e.css({marginLeft:0}).animate({marginLeft:270},300,"linear",(function(){e.css({marginLeft:0}),e.removeClass("open"),e.closest(".subview").removeClass("subview").addClass("open"),$(".head-menu").toggleClass("level-1",!1),renderLevel()})),!1}));const toggleEmpty=e=>""==e.value?e.parentNode.classList.add("is-empty"):e.parentNode.classList.remove("is-empty");$("input").each(((e,t)=>toggleEmpty(t))).on("focus",(function(){this.parentNode.classList.add("is-focus")})).on("focusout",(function(){this.parentNode.classList.remove("is-focus")})).on("keyup keypress",(function(){toggleEmpty(this)})),$(".search-post .clear").on("click",(function(){$(".search-post input").val("").length&&$(".search-post input").val("").change().focus()}));const cat_menu=function(){var e={menu:".categories-menu-line",item:".categories-menu-line > li:not(.more)",itemParent:".categories-menu-line > li.parent-top",more:".categories-menu-line .js-more",sub:".box-categories-menu-sub",bg:".categories-menu-bg",menu1:".box-categories-menu-sub .menu-1 > ul",menu2:".box-categories-menu-sub .menu-2 > ul",menu3:".box-categories-menu-sub .menu-3 > ul",menu4:".box-categories-menu-sub .menu-4 > ul",m2:".box-categories-menu-sub .menu-2",m3:".box-categories-menu-sub .menu-3",m4:".box-categories-menu-sub .menu-4",product:".box-categories-menu-sub .product",products:[".box-categories-menu-sub .wrap-product-4 .product1",".box-categories-menu-sub .wrap-product-3 .product1",".box-categories-menu-sub .wrap-product-4 .product2",".box-categories-menu-sub .wrap-product-3 .product2",".box-categories-menu-sub .wrap-product-2 .product1"],product2:".box-categories-menu-sub .wrap-product-2",product3:".box-categories-menu-sub .wrap-product-3",product4:".box-categories-menu-sub .wrap-product-4",active:".parent-top.active"};const t={};function n(){$(e.more).show();var t=$(e.more).width();$(e.more).hide();var n=$(e.menu).width();$(e.menu).removeClass("is-more");var o=t;$(e.item).each((function(t,a){$(a).removeClass("hide").show(),(o+=$(a).outerWidth())>n&&($(a).addClass("hide").hide(),$(e.more).show(),$(e.menu).addClass("is-more"))}))}function o(){if(!$(".parent-top.active").length)return $(e.sub).slideUp(100).removeClass("open").removeClass("box-more"),void $(e.bg).hide()}let a=0;function i(){if(document.body.clientWidth>991&&!a){var n=[];$(e.itemParent).each((function(e){const t=$(this);let o=t.attr("class").match(/cat-item-(\d+)/),a=0;o&&(a=o[1]),t.data("key",e),n[e]=[a,t.find("a").eq(0).attr("href")]})),$.ajax({url:alidAjax.ajaxurl,type:"POST",dataType:"json",async:!0,data:{action:"top_product2",prepare_prod:n},success:function(e){a=1,e&&e.forEach((function(e,n){t[n]=e}))}})}}function s(){const n=$(e.active).data("key"),o=t[n];if(o)for(let t in e.products)o[t]?($(e.products[t]).find("img").attr("src",o[t].thumb),$(e.products[t]).find("a").attr("href",o[t].permalink),$(e.products[t]).find(".box-title .text").text(o[t].title),2==t&&($(e.products[4]).find("img").attr("src",o[t].thumb),$(e.products[4]).find("a").attr("href",o[t].permalink),$(e.products[4]).find(".box-title .text").text(o[t].title))):(4!=t&&$(e.products[t]).hide(),2==t&&$(e.products[4]).hide())}function r(t){if($(e.m2).removeClass("link-cat"),$(e.m3).removeClass("link-cat"),$(e.m4).removeClass("link-cat"),$(e.product).hide(),t<=7&&($(e.m2).addClass("link-cat"),$(e.product2).find(".product1").show()),t<=14)return $(e.m3).addClass("link-cat"),$(e.m4).addClass("link-cat"),$(e.product3).find(".product1").show(),void $(e.product4).find(".product1").show();t<28?($(e.m3).addClass("link-cat"),$(e.m4).addClass("link-cat"),$(e.product).show(),$(e.product2).find(".product1").hide()):t<42&&($(e.m4).addClass("link-cat"),$(e.product4).find(".product").show(),$(e.product2).find(".product1").hide()),$(".box-categories-menu-sub .box-menu .menu").each((function(){$(this).find("li").length&&($(this).removeClass("link-cat"),$(this).find(".product").hide())}))}var u=null;return{init(){n(),$(window).resize((function(){clearTimeout(u),$("li").removeClass("active"),$(e.sub).hide(),$(e.bg).hide(),n()})),$(".categories-menu-line ul").closest("li").addClass("parent-top"),$(".categories-menu-line > li.parent-top").hover((function(t){return t.preventDefault(),clearTimeout(u),u=setTimeout((()=>{$("li.parent-top").removeClass("active"),$(this).toggleClass("active",!0),$(this).hasClass("more")?function(){var t=$(".categories-menu-line > li.hide:not(.more)");if(t.length){var n,a=t.find("li"),i=7;a.length>=14&&(i=Math.round(a.length/2)),$(e.menu1).html(""),$(e.menu2).html(""),$(e.menu3).html(""),$(e.menu4).html("");var u=0;$(t).each((function(t,o){(u+=$(o).find("li").length+1)<=i?n=e.menu1:u<=2*i?n=e.menu2:u<=3*i?n=e.menu3:u<=4*i&&(n=e.menu4),$(o).clone().removeClass("hide").show().appendTo(n)})),r(u),s(),$(e.sub).addClass("open").addClass("box-more").slideDown(400),$(e.bg).show()}else o()}():function(){var t=$(".parent-top.active");if(t.length){var n,a=t.find(" > .children > li, > .sub-menu > li"),i=t.find("li>a"),u=7;i.length>=14&&i.length<=28?(u=Math.round(a.length/2),Math.round(i.length/2)):i.length>=28&&i.length<=56?(u=Math.round(a.length/3),Math.round(i.length/3)):i.length>=56&&(u=Math.round(a.length/4),Math.round(i.length/4)),$(e.menu1).html(""),$(e.menu2).html(""),$(e.menu3).html(""),$(e.menu4).html(""),$(a).each((function(t,o){t<u?n=e.menu1:t<2*u?n=e.menu2:t<3*u?n=e.menu3:t<4*u&&(n=e.menu4),$(o).clone().appendTo(n)})),r(i.length),s(),$(e.bg).show(),$(e.sub).removeClass("box-more").slideDown(400)}else o()}()}),300),!1})),$("*").hover((function(e){$(e.target).closest(".categories-menu-line").length||clearTimeout(u)})),$(".categories-menu-line > li:not(.parent-top)").hover((function(t){clearTimeout(u),$("li.parent-top").removeClass("active"),$(e.more).removeClass("active"),o()})),$(e.bg).hover((function(t){clearTimeout(u),$("li.parent-top").removeClass("active"),$(e.more).removeClass("active"),o()})),$(".box-categories-menu-sub").mouseleave((function(t){clearTimeout(u),$(t.relatedTarget).closest(".parent-top").length||($("li.parent-top").removeClass("active"),$(e.more).removeClass("active"),o())})),$("body").on("click",(function(t){$(t.target).closest(".box-categories-menu-sub")||($("li.parent-top").removeClass("active"),$(e.more).removeClass("active")),o()})),i(),$(window).resize((function(){i()}))}}}().init();$(".categories-menu-line>li.menu-item-has-children>a").on("click",(function(){if(document.body.clientWidth<1200){let e=$(this);return setTimeout((function(){e.parent().is(".active")?(e.parent().removeClass("active"),$(".box-categories-menu-sub").slideUp(500)):(e.parent().addClass("active"),$(".box-categories-menu-sub").slideDown(500))}),100),!1}}));
