const $form=$("#form_singleProduct");function isURL(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)}const productSliderSku=function(){var e,t=".js-sku-set",i=".js-productSlider",a=".js-productSlider .next",s=".js-productSlider .previous";function r(){(window.innerWidth>0?window.innerWidth:screen.width)<768?e&&e.setOptions({nav:"dots",arrows:!1,allowfullscreen:!1}):e&&e.setOptions({nav:"thumbs",arrows:!0,allowfullscreen:!0})}return{init(){$(i).show(),$(i).each((function(){$(this).is(":visible")&&(e=$(this).fotorama({minwidth:290,width:768,height:"auto",maxwidth:"100%",shadows:!0,allowfullscreen:!0,arrows:!1,nav:"dots",fit:"scaledown",loop:!0,thumbborderwidth:2,thumbwidth:75,thumbheight:75,thumbmargin:15}).data("fotorama"))})),r(),$(window).resize((function(){r()})),$(".js-productSlider .fotorama__nav-wrap").append('<div class="next icon-right-open-big"></div>'),$(".js-productSlider .fotorama__nav-wrap").append('<div class="previous icon-left-open-big"></div>'),$(".js-productSlider .fotorama__arr--next").after('<div class="ads-fotorama__arr-right"></div>'),$(".js-productSlider .fotorama__arr--next").after('<div class="ads-fotorama__arr-left"></div>'),$("body").on("click",".fotorama--fullscreen .fotorama__stage__frame",(function(t){"IMG"!==t.target.nodeName&&e&&e.cancelFullScreen()})),$("body").on("click",".fotorama--fullscreen .ads-fotorama__arr-left",(function(t){e&&e.show("<")})),$("body").on("click",".fotorama--fullscreen .ads-fotorama__arr-right",(function(t){e&&e.show(">")})),$("body").on("click",a,(function(){e&&e.show(">")})),$("body").on("click",s,(function(){e&&e.show("<")})),$form.on("click",t,(function(){var t=$(this).children("img").data("img");if(isURL(t)){t.indexOf("_50x50.jpg")>0&&(t=t.replace("_50x50.jpg",""));var i=!1;e&&(jQuery.each(e.data,(function(e,a){a.img==t&&(i=e)})),i||(i=e.push({img:t,thumb:t}).size,i--),e.show({index:i,time:0}))}}))}}}();function getSku(e=!0){var t="js-item-sku",i='[name="sku-meta-set[]"]',a=!1,s=[];return $form.find(i).each((function(){if(0==$(this).val().length&&!1!==e){$(this).closest(t).addClass("is-empty");var i=$(this).closest(".js-item-sku").find(".sku-warning").text();window.Core.notify(i,"error"),a=!0}else $(this).closest(t).removeClass("is-empty"),s.push($(this).val())})),!a&&{foo:s}}const changePriceSku=function(){var e,t;function i(e){var t,i,s,o,n,l=e.split(";");for(t in l){var c=$('input[value="'+l[t]+'"]').closest(".js-sku-set");i=c,s=void 0,o=void 0,n=void 0,s=$(i).data("set"),o=$(i).data("meta"),n=$("#check-"+s+"-"+o).val(),$("#js-set-"+s).val(n)}r($("body").hasClass("js-show-pre-selected-variation")),a()}function a(){var e,i=getSku(!1);if(!i)return!1;var a=i.foo;e=a.join(";"),void 0!==t[e]?$("body").trigger({type:"changeSku",foo:a,item:t[e],skuAttrName:e}):console.log("no sku")}function s(e){var t=e.item,i={price:t.price,_price:t._price,_price_nc:t._price_nc,salePrice:t.salePrice,_salePrice:t._salePrice,_salePrice_nc:t._salePrice_nc,stock:t.quantity,savePercent:t.discount,_save:t._price-t._salePrice,_save_nc:t._price_nc-t._salePrice_nc,save:t.save};i._save<0&&(i._save=0),pageSingleProduct.setStage(i),pageSingleProduct.setPrice()}function r(e=!0){!function(e=!0){var i=getSku(!1);if(!i)return!1;var a=i.foo;$(".js-sku-set").addClass("disabled").removeClass("active"),$.each(t,(function(t,i){var s=t.split(";"),r=0,o=a.length;for(var n in a)a[n]==s[n]&&r++,$('input[value="'+a[n]+'"]').closest(".js-sku-set").addClass("active");r>=o-1&&$.each(s,(function(e){$('input[value="'+s[e]+'"]').closest(".js-sku-set").removeClass("disabled")})),e&&$(".js-sku-set.active").each((function(){var e;(e=$(this)).parents(".value_cont").prev().find("span").replaceWith(""),e.parents(".value_cont").prev().append('<span style="margin:0 0 0 5px;">'+e.attr("data-title")+"</span>")}))}))}(e),function(){var e=$('[name="sku-meta-set[]"][value=""]').length,i=$('[name="sku-meta-set[]"]').length;if(e&&i>1){$(".js-item-sku").each((function(e){$(this).find(".js-sku-set").removeClass("disabled"),$(this).find('[name="sku-meta-set[]"]').val()||$(this).find('[name="sku-meta"]').each((function(){var i=$(this).val(),a=getSku(!1).foo;if(a.join("")){a[e]=i;var s=a.join(";");void 0===t[s]&&$(this).closest(".js-sku-set").addClass("disabled")}}))}));var a=$(".js-item-sku").length,s=$('[name="sku-meta-set[]"][value=""]').length;1!==s&&s<=a-1&&$(".js-item-sku").find('[name="sku-meta-set[]"]').each((function(){$(this).val()||$(this).closest(".js-item-sku").find(".js-sku-set").removeClass("disabled").addClass("test")}))}$(".js-sku-set.disabled.active").removeClass("active").closest(".js-item-sku").find('[name="sku-meta-set[]"]').val("")}(),function(){var e=getSku(!1);e||$(".js-sku-set").removeClass("disabled").removeClass("active");var i=e.foo;for(var a in i)if(!i[a])return;void 0===t[i.join(";")]&&$(".js-sku-set").removeClass("disabled").removeClass("active")}()}return{init:function(){if(e)return;e=this,t=window.skuAttr,window.sku,$('[name="currency"]').val(),$("body").on("click",".js-sku-set",(function(){!function(e){$(e).hasClass("disabled")&&$(".js-item-sku").find('[name="sku-meta-set[]"]').val("");var t=$(e).data("set"),i=$(e).data("meta"),a=$("#check-"+t+"-"+i).val();$("#js-set-"+t).val(a)}(this),r(),a()})).on("changeSku",s);let o=$('form [name="variation_default"]');void 0!==t&&o.length&&"lowest_price"!==o.val()?i(o.val()):function(){if(void 0===t)return null;var e,a="";$.each(t,(function(t,i){(!e||e>parseFloat(i._salePrice)&&i.quantity>0)&&(e=i._salePrice,a=t)})),i(a)}(),$("body").hasClass("js-show-pre-selected-variation")||($('[name="sku-meta-set[]"]').val(""),$(".js-sku-set").removeClass("active").removeClass("disabled")),$(".js-empty-sku-view").removeClass("js-empty-sku-view"),function(){if(void 0===t)return null;$(".js-item-sku").each((function(){1==$(".js-sku-set",this).length&&$(".js-sku-set",this).click()}))}(),$(".js-product-sku").show();$(".sku-row .value").each((function(){$(this).height()>96&&$(this).closest(".sku-row").addClass("line-sku").find(".js-all-sku").show()})),$(".js-all-sku").on("click",(function(){$(this).closest(".sku-row").toggleClass("line-sku")})),$(".js-sku-set").length&&r($("body").hasClass("js-show-pre-selected-variation")),$("body").trigger("sku_ready")}}}(),pageSingleProduct=function(){var e,t=$("body"),i=null,a=null,s={price:'[data-singleProduct="price"]',salePrice:'[data-singleProduct="savePrice"]',stock:'[data-singleProduct="stock"]',save:'[data-singleProduct="save"]',savePercent:'[data-singleProduct="savePercent"]',totalPrice:'[data-singleProduct="totalPrice"]'},r={price:'[data-singleProductBox="price"]',salePrice:'[data-singleProductBox="salePrice"]',savePercent:'[data-singleProductBox="savePercent"]',stock:'[data-singleProductBox="stock"]',save:'[data-singleProductBox="savePercent"]',totalPrice:'[data-singleProductBox="totalPrice"]'},o={isTotalPrice:!0,price:$form.find('[name="price"]').val(),save:$form.find('[name="save"]').val(),salePrice:$form.find('[name="salePrice"]').val(),savePercent:$form.find('[name="savePercent"]').val(),stock:$form.find('[name="stock"]').val(),_price:$form.find('[name="_price"]').val(),_price_nc:$form.find('[name="_price_nc"]').val(),_salePrice:$form.find('[name="_salePrice"]').val(),_quantity:$('[data-singleProductInput="quantity"]').val(),_salePrice_nc:$form.find('[name="_salePrice_nc"]').val(),_save:$form.find('[name="_save"]').val(),_save_nc:$form.find('[name="_save_nc"]').val(),currency:$form.find('[name="currency"]').val(),currency_shipping:$form.find('[name="currency_shipping"]').val(),price_shipping:$form.find('[data-singleproduct="shipping"] option:selected').data("price")};function n(){return o.currency=$form.find('[name="currency"]').val(),o.currency}function l(){return o.currency_shipping=$form.find('[name="currency_shipping"]').val(),o.currency_shipping}function c(){var e=$('[data-singleproduct="single-shipping"]').find("option:selected");$('[data-singleproduct="shipping-info"]').html(e.data("info"))}return{init:function(){e=this,t.on("keyup mouseup click",'[data-singleProductInput="quantity"]',(function(){clearTimeout(i);var t=this;i=setTimeout((function(){var i=parseInt($(t).val());i=i>0?i:1,$('[data-singleproductinput="quantity"]').val(i),e.setStage("_quantity",i),e.setPrice()}),400)})),$('[data-singleproduct="single-shipping"]').on("change",(function(){c()})),c(),e.setPrice(),changePriceSku.init()},setStage:function(e,t,i){if(console.log(e),"object"==typeof e){for(var n in e)o[n]=e[n];i=t}else o[e]=t;!0===i&&(clearTimeout(a),a=setTimeout((function(){$(s.salePrice).text(o.salePrice),$(s.totalPrice).text(o.totalPrice),$(s.price).text(o.price),$(s.save).text(o.save),$(s.savePercent).text(o.savePercent),$(s.stock).text(o.stock),$(r.salePrice).show(),parseFloat(o._price)>0&&o._price!=o._salePrice?$(r.price).show():$(r.price).hide(),parseFloat(o._price)-parseFloat(o._salePrice)>0?$(r.savePercent).show():$(r.savePercent).hide(),o.stock>0?$(r.totalPrice).show():$(r.totalPrice).hide(),parseInt(o.stock)<parseInt(window.adstmCustomize.tp_single_stock_count)?$(r.stock).show():$(r.stock).hide(),function(){var e=$('input[data-singleproduct="single-shipping"]'),t=$('select[data-singleproduct="single-shipping"]');if(t.length)$(t).find("option").each((function(e,t){var i=$(this).attr("data-cost_nc"),a=window.formatPrice.convertPriceOut(i,l(),!1),s=$(this).attr("data-template");s=s.replace(/{{\s*price\s*}}/,a),$(this).text(s)}));else if(e.length){var i=e.attr("data-cost_nc");if(i>0){var a=$('[data-singleproduct="single-shipping_value"]'),s=window.formatPrice.convertPriceOut(i,l(),!1),r=e.attr("data-template");r=r.replace(/{{\s*price\s*}}/,s),a.text(r)}}}()}),100))},setPrice:function(){o._quantity=o._quantity||0;var t=1;o.isTotalPrice&&(t=o._quantity);var i=window.formatPrice.convertPrice(o._price_nc,n()),a=window.formatPrice.outPrice(i*t),s=window.formatPrice.convertPrice(o._salePrice_nc,n()),r=window.formatPrice.outPrice(s*t),l=o._price-o._salePrice,c=window.formatPrice.outPrice(l,n()),d=i>0&&s>0?Math.round((i-s)/i*100):"";i>0&&0==s&&(d=100);var u=window.formatPrice.outPrice(s*o._quantity);e.setStage("_price",i),e.setStage("_salePrice",s),e.setStage("price",a),e.setStage("salePrice",r),e.setStage("save",c),e.setStage("totalPrice",u),e.setStage("savePercent",d,!0)},isTotalPrice(t){e.setStage("isTotalPrice",!!t)}}}();function addOrder(){var e='[data-singleproductinput="quantity"]',t='[name="post_id"]',i='[name="shipping"]',a=getSku();if(!1===a)return!1;window.adsCart.add({post_id:$(t).val(),quantity:$(e).val(),shipping:$(i).val(),variation:a.foo})}productSliderSku.init(),$("body").on("infoCurrency:done",(function(){pageSingleProduct.init()})),$('[data-singleProductEvent="addCart"]').on("click",(function(e){e.preventDefault(),addOrder()})),$(window).width()<768&&$(".pr-breadcrumbs .fa").last().hide(),ttgallery(".js-slider-related",{slide_to_view:5,slide_to_scroll:1,loop:1,speed:200,lazy:1,lazy_attr:"data-lazy",force:1,dots:1,arrows:0,group_dots:0,responsive:{2500:{arrows:1},1340:{},1024:{slide_to_view:4,slide_to_scroll:1},991:{slide_to_view:3,slide_to_scroll:1},500:{slide_to_view:1,slide_to_scroll:1}}}),$("#buyNow").on("click",(function(e){!1===getSku()&&e.preventDefault()})),$("body").on("click",'[data-scroll="feedback-head"]',(function(){return $('[data-scroll="details"]').tab("show"),0!=$("#feedback-head").length&&($(window).width()>768&&(e=$("#feedback-head").offset().top-100),e?($("body,html").stop().animate({scrollTop:e},200),!1):void 0);var e})),$("body").on("click",".play_video_showroom",(function(){$(this).parent().find("video")[0].play(),$(this).parent().find("video").attr("controls","true"),$(this).hide()})),$("body").on("click",".itembgr_video",(function(){$(".item_video.tt_one_true").find("video")[0].play(),$(".item_video.tt_one_true").find("video").attr("controls","true"),$(".tt_one_true .play_video_showroom").hide()}));let url_next_page="",inProgress=0;function loadmore_reviews(){inProgress=1,$.ajax({url:url_next_page,success:e=>{let t=$("<div/>").html(e).contents();url_next_page=$(".next.page-numbers",t).attr("href"),url_next_page||$(".more-reviews").hide(),$(".review_list").append($(".review_list",t).html()),$(".pagination").html($(".pagination",t).html()),inProgress=0,baguetteBox.destroy(),baguetteBox.run(".gallery"),$("body").trigger("ttlazy")}})}url_next_page=$(".next.page-numbers").attr("href"),$(".load_reviews").on("click",(function(){!inProgress&&url_next_page&&loadmore_reviews()})),$("#cart-sidebar").length||$(".view_cart").hide(),$("body").on("cart:change cart:update cart:add",(function(e){$("#cart-sidebar").length&&e.cart.quantity>0?$(".view_cart").show():$(".view_cart").hide()})),$(".view_cart").on("click",(function(){$("html").addClass("cart-pull-page")})),jQuery(document).ready((function(){let e=0,t=0;function i(){document.body.clientWidth<768&&!e&&(ttgallery(".itemadapslider_gallery",{slide_to_view:1,slide_to_scroll:1,loop:1,speed:200,lazy:1,force:1,lazy_attr:"data-lazy",dots:1,arrows:0}),e=1),document.body.clientWidth>767&&!t&&(ttgallery(".item_slider",{slide_to_view:1,slide_to_scroll:1,loop:1,speed:200,lazy:1,force:1,lazy_attr:"data-lazy",dots:0,arrows:1}),ttgallery(".item_slider_minis",{slide_to_view:5,slide_to_scroll:5,arrows_by_one:1,loop:1,speed:200,lazy:1,force:1,margin:10,lazy_attr:"data-lazy",dots:0,arrows:1}),t=1)}i(),$(window).resize((function(){i()})),$(".meta-item-img").on("click","img",(function(){if($(".itembgr_video_adap").length){let e=$(".itemadapslider_gallery .ttgallery").attr("data-total");$(".itemadapslider_gallery").trigger("removeslide",[e-1]),$(".itemadapslider_gallery").trigger("addslide",['<div class="item"><div class="item_sqr"><img src="'+$(this).attr("data-img")+'" class="img-responsive" alt="" /></div></div>']),$(".itemadapslider_gallery").trigger("slideto",[e-1,0]);let t=$(".item_slider .ttgallery").attr("data-total");$(".item_slider").trigger("removeslide",[t-1]),$(".item_slider").trigger("addslide",['<div class="item"><div class="item_sqr"><img src="'+$(this).attr("data-img")+'" class="img-responsive" alt="" /></div></div>']),$(".item_slider").trigger("slideto",[t-1,0]),$(".item_slider_minis").trigger("removeslide",[t-1]),$(".item_slider_minis").trigger("addslide",['<div class="item"><div class="item_sqr"><img src="'+$(this).attr("data-img")+'" class="img-responsive" alt="" /></div></div>']),$(".item_slider_minis").trigger("slideto",[t-1,0]),$(".item_slider_minis .curr_active").removeClass("curr_active"),$('.item_slider_minis [data-count="'+(t-1)+'"]').addClass("curr_active")}else $(".itemadapslider_gallery").trigger("removeslide",[0]),$(".itemadapslider_gallery").trigger("addslide",['<div class="item"><div class="item_sqr"><img src="'+$(this).attr("data-img")+'" class="img-responsive" alt="" /></div></div>',"1"]),$(".itemadapslider_gallery").trigger("slideto",[0,0]),$(".item_slider").trigger("removeslide",[0]),$(".item_slider").trigger("addslide",['<div class="item"><div class="item_sqr"><img src="'+$(this).attr("data-img")+'" class="img-responsive" alt="" /></div></div>',"1"]),$(".item_slider").trigger("slideto",[0,0]),$(".item_slider_minis").trigger("removeslide",[0]),$(".item_slider_minis").trigger("addslide",['<div class="item"><div class="item_sqr"><img src="'+$(this).attr("data-img")+'" class="img-responsive" alt="" /></div></div>',"1"]),$(".item_slider_minis").trigger("slideto",[0,0]),$(".item_slider_minis .curr_active").removeClass("curr_active"),$('.item_slider_minis [data-count="0"]').addClass("curr_active")}));let a=0;$(".item_slider").on("beforeAnim",(function(e,t,i){if(a)a=0;else{let e=parseInt($(".item_slider .ttgallery").attr("data-total"))-1;t<i&&(i!=e||0!=t)||0==i&&t==e?$(".item_slider_minis").trigger("next",[1]):(t>i||i==e&&0==t)&&$(".item_slider_minis").trigger("prev",[1]),$(".item_slider_minis .curr_active").removeClass("curr_active"),$('.item_slider_minis [data-count="'+i+'"]').addClass("curr_active")}let s=$(".tt_one.item_video video");for(let e=0;e<s.length;e++)s[e].pause()})),$('.item_slider_minis [data-count="0"]').addClass("curr_active"),$(".item_slider_minis").on("click",".item",(function(){if(a=1,$(".item_slider").trigger("slideto",[$(this).attr("data-count"),0]),$(".item_slider_minis .curr_active").removeClass("curr_active"),$('.item_slider_minis [data-count="'+$(this).attr("data-count")+'"]').addClass("curr_active"),!$(this).find(".itembgr_video").length){let e=$(".tt_one.item_video video");for(let t=0;t<e.length;t++)e[t].pause()}})),$(".itemadapslider_gallery").on("beforeAnim",(function(e,t,i){let a=$(".tt_one .itembgr_video_adap video");for(let e=0;e<a.length;e++)a[e].pause()})),jQuery(".wrap-content table").each((function(){jQuery(this).wrap('<div style="max-width:100%;overflow:auto;"></div>')})),jQuery(".toreview").on("click",(function(){jQuery(window).scrollTop(jQuery("#box-feedback").offset().top)})),$(".tab_head").on("click",(function(){$(".tab_head").removeClass("active"),$(".adap_tab_head").removeClass("active"),$(this).addClass("active"),$(".tab_body").removeClass("show"),$("."+$(this).attr("id")).addClass("show").prev().addClass("active")})),$(".adap_tab_head").on("click",(function(){$(this).is(".active")&&!$(this).is(".adap_inactive")?$(this).addClass("adap_inactive"):($(".tab_head").removeClass("active"),$(".adap_tab_head").removeClass("active"),$(this).addClass("active").removeClass("adap_inactive"),$(".tab_body").removeClass("show"),$("."+$(this).attr("data-id")).addClass("show"),$("#"+$(this).attr("data-id")).addClass("active"))})),baguetteBox.run(".gallery")}));
